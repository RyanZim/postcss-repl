<div class="{{drawerOpen ? 'drawer-open' : ''}}">
  <div class="container">
    <GithubCorner />
    <div class="header">
      <h1>PostCSS REPL</h1>
    </div>
    <div class="input-output">
      <CodeMirror bind:value="input" id="input" />
      <CodeMirror bind:value="output" id="output" />
    </div>
    <pre class="error {{error ? 'visible' : ''}}">{{ error }}</pre>
  </div>
  <Drawer plugins="{{plugins}}" bind:open="drawerOpen"
          on:selectedPluginsChanged="set({ selectedPlugins: event })"
          on:toggle="set({ drawerOpen: event })"
  />
</div>
<script>
import CodeMirror from './CodeMirror';
import GithubCorner from './GithubCorner';
import Drawer from './Drawer';

const css = `p {
  color: red;
}
`;

export default {
  components: { CodeMirror, GithubCorner, Drawer },
  data() {
    return {
      input: css,
      output: '',
      error: '',
      plugins: [],
      selectedPlugins: [],
      drawerOpen: true,
    };
  },
};
</script>

<style>
@import '../variables.css';

.drawer {
  left: calc(-$drawer-width + $drawer-hint-width);
  width: $drawer-width;
}

.container {
  transition: padding-left 0.5s ease;
}

.drawer-open {
  & .drawer {
    left: 0;
  }
  & .container {
    padding-left: $drawer-width;
  }
}

.input-output {
  display: flex;
  & > div {
    padding: 1rem;
    flex: 0 1 50%;
    height: calc(100vh - 8rem);
  }
  & .CodeMirror {
    height: 100%;
  }
}

.error {
  position: fixed;
  bottom: -25vh;
  right: 0;
  z-index: 10;
  margin: 1rem;
  padding: 1rem;
  background: $dark;
  color: red;

  &.visible {
    bottom: 0;
    transition: bottom 0.5s ease-in;
  }
}
</style>
